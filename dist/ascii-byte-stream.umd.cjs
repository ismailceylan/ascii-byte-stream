(function(i,s){typeof exports=="object"&&typeof module<"u"?module.exports=s():typeof define=="function"&&define.amd?define(s):(i=typeof globalThis<"u"?globalThis:i||self,i["ascii-byte-stream"]=s())})(this,function(){"use strict";var n=Object.defineProperty;var u=(i,s,r)=>s in i?n(i,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[s]=r;var o=(i,s,r)=>u(i,typeof s!="symbol"?s+"":s,r);class i{constructor(r){o(this,"raw","");o(this,"cursor",0);this.raw=r}get current(){return this.raw[this.cursor]}get next(){return this.raw[++this.cursor]}get prev(){return this.raw[--this.cursor]}matches(r){return this.raw.slice(this.cursor,this.cursor+r.length)===r}before(r){return this.raw.slice(this.cursor-r.length,this.cursor)===r}after(r){return this.raw.slice(this.cursor+1,this.cursor+r.length+1)===r}distanceTo(r){return this.raw.indexOf(r,this.cursor)-this.cursor-1}closest(r){return r.map(t=>[t,this.distanceTo(t)]).sort((t,e)=>t[1]-e[1])}startTransaction(){const{cursor:r}=this;function t(){this.cursor=r}return t.bind(this)}getUntil(r){const t=this.raw.indexOf(r,this.cursor);if(t===-1)return;const e=this.raw.slice(this.cursor,t);return this.cursor+=e.length,e}slice(r){if(r<0)throw new RangeError(`Cannot slice backwards from ${this.cursor} to ${r}.`);return this.raw.slice(this.cursor,this.cursor+=r)}move(r){return this.cursor+=r,this}moveTo(r){return this.cursor=r,this}jumpTo(r){return this.cursor=this.raw.indexOf(r,this.cursor)}consume(r){let t;const e=this.cursor;for(Array.isArray(r)||(r=[r]);(t=r.findIndex(c=>this.matches(c)))>-1;)this.move(r[t].length);return this.raw.slice(e,this.cursor)}}return i});
